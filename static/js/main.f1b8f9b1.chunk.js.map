{"version":3,"sources":["images/pusheencat.png","images/GitHub_Logo_White.png","middleware/logger.js","actions/album.js","reducers/album.js","actions/photo.js","reducers/photo.js","reducers/index.js","components/octocat.jsx","components/footer.jsx","utils.js","components/albums.jsx","components/photo.jsx","components/photos.jsx","components/modal.jsx","components/gallery.jsx","index.jsx","store/index.js"],"names":["module","exports","__webpack_require__","p","logger","store","next","action","SET_ALBUMS","list","limit","arguments","length","undefined","_ref2","Object","asyncToGenerator","regenerator_default","a","mark","_callee","dispatch","_getState","response","albums","wrap","_context","prev","fetch","sent","json","t0","slice","abrupt","type","payload","stop","_x","_x2","apply","this","initialState","albumReducer","handleActions","defineProperty","AT","SET_PHOTOS","photoReducer","reduce","acc","photo","albumId","push","rootReducer","combineReducers","photos","style","position","bottom","right","width","top","zIndex","Octocat","react_default","createElement","href","target","rel","src","octocat","alt","Footer","react","className","pjson","author","Date","getFullYear","version","github","getPromiseRef","ref","promise","Promise","resolve","reject","objectSpread","Albums","_ref","allPhotos","setPhotos","setAlbumId","areAlbumsLoaded","Boolean","size","arePhotosLoaded","map","album","key","id","title","onClick","CircularProgress","color","LOAD_PHOTO_DELAY","React","memo","_useState","useState","_useState2","slicedToArray","isLoaded","setIsLoaded","isMounted","useEffectOnce","_loadPhoto","image","wait","_getPromiseRef","onLoad","Image","setTimeout","onload","thumbnailUrl","all","loadPhoto","backgroundImage","concat","cx","Photo-image-is-loaded","Fragment","event","stopPropagation","filter","_photo","Photos","isLoading","onPhotoClick","src_components_photo","assign","modalStyles","content","display","border","background","overlay","backgroundColor","Modal","modalIsOpen","closeModal","lib_default","isOpen","contentLabel","onRequestClose","appElement","document","getElementById","url","selector","_mapDispatchToUseCall","actions","entries","accumulator","k","v","useCallback","mapDispatchToUseCallback","useDispatch","listAlbums","albumsActions","listPhotos","setPhoto","_useState3","_useState4","_useState5","_useState6","_useState7","_useState8","setIsOpen","_useShallowSelector","useSelector","shallowEqual","src_components_albums","src_components_photos","photoId","find","components_modal","middleware","applyMiddleware","thunk","createStore","configureStore","Body","children","rootElement","render","es","src_Body","components_gallery","footer"],"mappings":"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","file":"static/js/main.f1b8f9b1.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/pusheencat.50dbdbc4.png\";","module.exports = __webpack_public_path__ + \"static/media/GitHub_Logo_White.064ace47.png\";","export const logger = store => next => action => {\r\n  if (process.env.NODE_ENV !== \"production\") {\r\n    console.log(action);\r\n  }\r\n\r\n  return next(action);\r\n};\r\n","import fetch from 'cross-fetch'\r\n\r\nexport const SET_ALBUMS = 'Set Albums'\r\n\r\nexport function list({ limit } = {}) {\r\n  return async (dispatch, _getState) => {\r\n    const response = await fetch('https://jsonplaceholder.typicode.com/albums')\r\n    const albums = (await response.json()).slice(0, limit)\r\n    return dispatch({ type: SET_ALBUMS, payload: albums })\r\n  }\r\n}\r\n","import { handleActions } from 'redux-actions'\r\n\r\nimport * as AT from '../actions/album'\r\n\r\nconst initialState = []\r\n\r\nexport const albumReducer = handleActions(\r\n  { [AT.SET_ALBUMS]: (_state = initialState, action) => action.payload },\r\n  initialState\r\n)\r\n","import fetch from 'cross-fetch'\r\n\r\nexport const SET_PHOTOS = 'Set Photos'\r\n\r\nexport function list() {\r\n  return async (dispatch, _getState) => {\r\n    const response = await fetch('https://jsonplaceholder.typicode.com/photos')\r\n    const photos = await response.json()\r\n    return dispatch({ type: SET_PHOTOS, payload: photos })\r\n  }\r\n}\r\n","import { handleActions } from 'redux-actions'\r\n\r\nimport * as AT from '../actions/photo'\r\n\r\nconst initialState = {}\r\n\r\nexport const photoReducer = handleActions(\r\n  {\r\n    [AT.SET_PHOTOS]: (_state = initialState, action) =>\r\n      action.payload.reduce((acc, photo) => {\r\n        acc[photo.albumId] = acc[photo.albumId] || []\r\n        acc[photo.albumId].push(photo)\r\n        return acc\r\n      }, {})\r\n  },\r\n  initialState\r\n)\r\n","import { combineReducers } from 'redux'\r\nimport { albumReducer } from './album'\r\nimport { photoReducer } from './photo'\r\n\r\nexport const rootReducer = combineReducers({\r\n  albums: albumReducer,\r\n  photos: photoReducer\r\n})\r\n\r\nexport {}\r\n","import React from 'react'\r\n\r\nimport octocat from '../images/pusheencat.png'\r\n\r\nconst style = {\r\n  position: 'fixed',\r\n  bottom: '1rem',\r\n  right: '1rem',\r\n  width: '3.5rem',\r\n  top: '1rem',\r\n  zIndex: 3\r\n}\r\n\r\nexport const Octocat = () => (\r\n  <a href=\"https://github.com/\" target=\"_blank\" rel=\"noopener noreferrer\">\r\n    <img style={style} src={octocat} alt=\"octocat\" />\r\n  </a>\r\n)\r\n\r\nexport default Octocat\r\n","import * as React from 'react'\r\n\r\nimport pjson from '../../package.json'\r\nimport github from '../images/GitHub_Logo_White.png'\r\n\r\nexport const Footer = () => (\r\n  <footer className=\"Footer\">\r\n    <span className=\"Footer-credits\">\r\n      Made by&nbsp;<a href=\"https://github.com/adi518\">{pjson.author}</a>\r\n      &nbsp;—&nbsp;\r\n      {new Date().getFullYear()}&nbsp;—&nbsp;{pjson.version}\r\n    </span>\r\n    <a className=\"Footer-github\" href=\"https://github.com/adi518/rapyd\">\r\n      <img src={github} alt=\"GitHub\" />\r\n    </a>\r\n  </footer>\r\n)\r\n\r\nexport default Footer\r\n","import { useCallback } from 'react'\nimport { useSelector, shallowEqual } from 'react-redux'\n\nexport const mapDispatchToUseCallback = (dispatch, actions) =>\n  Object.entries(actions).reduce((accumulator, [k, v]) => {\n    accumulator[k] = useCallback(() => dispatch(v), [dispatch])\n    return accumulator\n  }, {})\n\nexport const useShallowSelector = selector =>\n  useSelector(selector, shallowEqual)\n\nexport const getPromiseRef = () => {\n  const ref = {}\n  const promise = new Promise((resolve, reject) => {\n    ref.resolve = resolve\n    ref.reject = reject\n  })\n  return { ...ref, promise }\n}\n","import React from 'react'\r\nimport { size } from 'lodash'\r\nimport { CircularProgress } from '@material-ui/core'\r\n\r\nimport './albums.css'\r\n\r\nexport const ALBUMS_DISPLAY_LIMIT = 36\r\nexport const PHOTOS_DISPLAY_LIMIT = 36\r\n\r\nexport const Albums = ({\r\n  albums,\r\n  albumId,\r\n  allPhotos,\r\n  setPhotos,\r\n  setAlbumId\r\n}) => {\r\n  const areAlbumsLoaded = Boolean(size(albums))\r\n  const arePhotosLoaded = Boolean(size(allPhotos))\r\n  return (\r\n    <section className=\"Albums\">\r\n      <h2>Albums</h2>\r\n      {areAlbumsLoaded && arePhotosLoaded ? (\r\n        <div className=\"grid\">\r\n          {albums.map(album => (\r\n            <div\r\n              key={album.id}\r\n              title={album.title}\r\n              className=\"Albums-album grid-item\"\r\n              onClick={() => {\r\n                if (album.id === albumId) {\r\n                  setAlbumId(null)\r\n                  setPhotos([])\r\n                } else {\r\n                  setAlbumId(album.id)\r\n                  setPhotos(allPhotos[album.id].slice(0, PHOTOS_DISPLAY_LIMIT))\r\n                }\r\n              }}\r\n            >\r\n              <span className=\"Albums-album-id\">{album.id}</span>\r\n              <span className=\"Albums-album-title line-clamp\">\r\n                {album.title}\r\n              </span>\r\n              {arePhotosLoaded && (\r\n                <div className=\"Albums-album-photos\">\r\n                  ({size(allPhotos[album.id])}&nbsp;Photos)\r\n                </div>\r\n              )}\r\n            </div>\r\n          ))}\r\n        </div>\r\n      ) : (\r\n        <CircularProgress color=\"inherit\" size={20} />\r\n      )}\r\n    </section>\r\n  )\r\n}\r\n\r\nexport default Albums\r\n","import cx from 'classnames'\r\nimport React, { useState } from 'react'\r\nimport { useEffectOnce } from 'react-use'\r\nimport { CircularProgress } from '@material-ui/core'\r\n\r\nimport { getPromiseRef } from '../utils'\r\n\r\nimport './photo.css'\r\n\r\nconst LOAD_PHOTO_DELAY = 1000\r\n\r\nexport const Photo = ({ photo, photos, setPhotos, onClick }) => {\r\n  const [isLoaded, setIsLoaded] = useState(false)\r\n  let isMounted = false\r\n\r\n  useEffectOnce(() => {\r\n    isMounted = true\r\n\r\n    async function loadPhoto() {\r\n      const image = new Image()\r\n      const wait = new Promise(resolve => setTimeout(resolve, LOAD_PHOTO_DELAY))\r\n      const { resolve, promise: onLoad } = getPromiseRef()\r\n      image.onload = () => resolve()\r\n      image.src = photo.thumbnailUrl\r\n      await Promise.all([wait, onLoad])\r\n      isMounted && setIsLoaded(true)\r\n    }\r\n\r\n    loadPhoto()\r\n\r\n    return () => (isMounted = false)\r\n  })\r\n\r\n  return (\r\n    <div\r\n      title={photo.title}\r\n      className=\"Photo grid-item\"\r\n      onClick={() => onClick(photo.id)}\r\n    >\r\n      <div\r\n        style={{ backgroundImage: `url(${photo.thumbnailUrl})` }}\r\n        className={cx('Photo-image', { 'Photo-image-is-loaded': isLoaded })}\r\n      ></div>\r\n      {isLoaded ? (\r\n        <React.Fragment>\r\n          <div className=\"Photo-title line-clamp\">{photo.title}</div>\r\n          <div\r\n            className=\"Photo-dismiss\"\r\n            onClick={event => {\r\n              event.stopPropagation()\r\n              const otherPhotos = _photo => _photo.id !== photo.id\r\n              setPhotos(photos.filter(otherPhotos))\r\n            }}\r\n          />\r\n        </React.Fragment>\r\n      ) : (\r\n        <CircularProgress color=\"inherit\" size={20} />\r\n      )}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default React.memo(Photo)\r\n","import React from 'react'\r\nimport { size } from 'lodash'\r\nimport { CircularProgress } from '@material-ui/core'\r\n\r\nimport Photo from './photo'\r\n\r\nimport './photos.css'\r\n\r\nexport const Photos = ({ isLoading, photos, setPhotos, onPhotoClick }) => {\r\n  const renderPhotos = () => {\r\n    return size(photos) ? (\r\n      <div className=\"grid\">\r\n        {photos.map(photo => (\r\n          <Photo\r\n            key={photo.id}\r\n            {...{ photo, photos, setPhotos, onClick: onPhotoClick }}\r\n          />\r\n        ))}\r\n      </div>\r\n    ) : (\r\n      <div className=\"Photos-placeholder\">\r\n        <span className=\"Photos-placeholder-text\">SELECT ALBUM</span>\r\n      </div>\r\n    )\r\n  }\r\n  return (\r\n    <section className=\"Photos\">\r\n      <h2>Photos</h2>\r\n      {isLoading ? (\r\n        <CircularProgress color=\"inherit\" size={20} />\r\n      ) : (\r\n        renderPhotos()\r\n      )}\r\n    </section>\r\n  )\r\n}\r\n\r\nexport default Photos\r\n","import React from 'react'\r\nimport ReactModal from 'react-modal'\r\n\r\nimport './modal.css'\r\n\r\nconst modalStyles = {\r\n  content: {\r\n    display: 'flex',\r\n    border: 'none',\r\n    background: 'rgba(23, 20, 29, 0.95)'\r\n  },\r\n  overlay: { zIndex: 4, backgroundColor: 'rgba(0, 0, 0, 0.5)' }\r\n}\r\n\r\nexport const Modal = ({ photo, modalIsOpen, closeModal }) => (\r\n  <ReactModal\r\n    style={modalStyles}\r\n    isOpen={modalIsOpen}\r\n    contentLabel=\"Photo Modal\"\r\n    onRequestClose={closeModal}\r\n    appElement={document.getElementById('root')}\r\n  >\r\n    <div className=\"Modal-dismiss\" onClick={closeModal} />\r\n    {photo && (\r\n      <div className=\"Modal-photo\">\r\n        <img src={photo.url} alt={photo.title} />\r\n      </div>\r\n    )}\r\n  </ReactModal>\r\n)\r\n\r\nexport default Modal\r\n","import { size } from 'lodash'\r\nimport { useEffectOnce } from 'react-use'\r\nimport React, { useState } from 'react'\r\nimport { useDispatch } from 'react-redux'\r\n\r\nimport { useShallowSelector, mapDispatchToUseCallback } from '../utils'\r\nimport Albums, { ALBUMS_DISPLAY_LIMIT } from './albums'\r\nimport Photos from './photos'\r\nimport Modal from './modal'\r\n\r\nimport * as albumsActions from '../actions/album'\r\nimport * as photosActions from '../actions/photo'\r\n\r\nimport './gallery.css'\r\n\r\nexport const Gallery = () => {\r\n  const dispatch = useDispatch()\r\n  const { listAlbums, listPhotos } = mapDispatchToUseCallback(dispatch, {\r\n    listAlbums: albumsActions.list({ limit: ALBUMS_DISPLAY_LIMIT }),\r\n    listPhotos: photosActions.list()\r\n  })\r\n\r\n  const openModal = () => setIsOpen(true)\r\n  const closeModal = () => setIsOpen(false)\r\n\r\n  const [photo, setPhoto] = useState(null)\r\n  const [photos, setPhotos] = useState([])\r\n  const [albumId, setAlbumId] = useState(null)\r\n  const [modalIsOpen, setIsOpen] = useState(false)\r\n  const { albums, photos: allPhotos } = useShallowSelector(\r\n    ({ albums, photos }) => ({\r\n      albums,\r\n      photos\r\n    })\r\n  )\r\n\r\n  useEffectOnce(() => {\r\n    listAlbums()\r\n    listPhotos()\r\n  })\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <section className=\"Gallery\">\r\n        <div className=\"Gallery-grid\">\r\n          <Albums {...{ albums, albumId, allPhotos, setAlbumId, setPhotos }} />\r\n          <Photos\r\n            {...{\r\n              photos,\r\n              setPhotos,\r\n              isLoading: size(albums) === 0,\r\n              onPhotoClick: photoId => {\r\n                const thisPhoto = photo => photo.id === photoId\r\n                const photo = allPhotos[albumId].find(thisPhoto)\r\n                setPhoto(photo)\r\n                openModal()\r\n              }\r\n            }}\r\n          />\r\n        </div>\r\n      </section>\r\n      <Modal {...{ photo, modalIsOpen, closeModal }} />\r\n    </React.Fragment>\r\n  )\r\n}\r\n\r\nexport default React.memo(Gallery)\r\n","import React from 'react'\r\nimport { render } from 'react-dom'\r\nimport { Provider } from 'react-redux'\r\n\r\nimport { configureStore } from './store'\r\n\r\nimport Octocat from './components/octocat'\r\nimport Footer from './components/footer'\r\nimport Gallery from './components/gallery'\r\n\r\nimport './styles.css'\r\n\r\nconst store = configureStore()\r\n\r\nconst Body = ({ children }) => <main className=\"Body\">{children}</main>\r\n\r\nfunction App() {\r\n  return (\r\n    <Provider store={store}>\r\n      <div className=\"App\">\r\n        <Octocat />\r\n        <Body>\r\n          <Gallery />\r\n        </Body>\r\n        <Footer />\r\n      </div>\r\n    </Provider>\r\n  )\r\n}\r\n\r\nconst rootElement = document.getElementById('root')\r\nrender(<App />, rootElement)\r\n","import { createStore, applyMiddleware } from 'redux'\r\nimport { composeWithDevTools } from 'redux-devtools-extension'\r\nimport thunk from 'redux-thunk'\r\nimport { logger } from '../middleware'\r\nimport { rootReducer } from '../reducers'\r\n\r\nexport function configureStore(initialState) {\r\n  let middleware = applyMiddleware(thunk, logger)\r\n\r\n  if (process.env.NODE_ENV !== 'production') {\r\n    middleware = composeWithDevTools(middleware)\r\n  }\r\n\r\n  const store = createStore(rootReducer, initialState, middleware)\r\n\r\n  if (module.hot) {\r\n    module.hot.accept('../reducers', () => {\r\n      const nextReducer = require('../reducers')\r\n      store.replaceReducer(nextReducer)\r\n    })\r\n  }\r\n\r\n  return store\r\n}\r\n"],"sourceRoot":""}